<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Gui4jTabbedPaneFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">gui4j</a> &gt; <a href="index.source.html" class="el_package">org.gui4j.component.factory</a> &gt; <span class="el_source">Gui4jTabbedPaneFactory.java</span></div><h1>Gui4jTabbedPaneFactory.java</h1><pre class="source lang-java linenums">package org.gui4j.component.factory;

import java.awt.Color;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import javax.swing.JTabbedPane;
import javax.swing.SwingConstants;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.dom4j.LElement;
import org.gui4j.component.Gui4jJComponent;
import org.gui4j.component.Gui4jTabbedPane;
import org.gui4j.core.Gui4jCall;
import org.gui4j.core.Gui4jComponentContainer;
import org.gui4j.core.Gui4jComponentContainerManager;
import org.gui4j.core.Gui4jQualifiedComponent;
import org.gui4j.core.definition.Attribute;
import org.gui4j.core.definition.AttributeTypeEnumeration;
import org.gui4j.core.definition.AttributeTypeID;
import org.gui4j.core.definition.AttributeTypeMethodCall;
import org.gui4j.core.definition.Param;
import org.gui4j.exception.Gui4jUncheckedException;
import org.gui4j.util.Filter;

<span class="nc" id="L30">public final class Gui4jTabbedPaneFactory extends Gui4jJComponentFactory {</span>
  private static final String NAME = &quot;tabbedPane&quot;;
  private static final String PLACEMENT = &quot;placeTp&quot;;
  private static final String TITLE = &quot;title&quot;;
  private static final String FOREGROUND = &quot;foreground&quot;;
  private static final String BACKGROUND = &quot;background&quot;;
  private static final String TOOLTIP = &quot;tooltip&quot;;
  private static final String ID = &quot;id&quot;;
  private static final String TABPOLICY = &quot;tabPolicy&quot;;
  private static final String ONCHANGE = &quot;onChange&quot;;
  private static final String TABSELECTION = &quot;tabSelection&quot;;
  private static final String CONDITION = &quot;condition&quot;;
  private static final String ONSELECT = &quot;onSelect&quot;;
  private static final String TABPLACEMENT = &quot;tabPlacement&quot;;
  private static final String EMBEDDED = &quot;embedded&quot;;

<span class="nc" id="L46">  private static final Log mLogger = LogFactory.getLog(Gui4jTabbedPaneFactory.class);</span>

  /*
   * (non-Javadoc)
   *
   * @see org.gui4j.component.factory.Gui4jJComponentFactory#defineGui4jJComponentBy(org.gui4j.core.Gui4jComponentContainer,
   *      java.lang.String, org.dom4j.LElement)
   */
  protected Gui4jJComponent defineGui4jJComponentBy(
      Gui4jComponentContainer gui4jComponentContainer, String id, LElement e) {

<span class="nc" id="L57">    String tabPolicyStr = gui4jComponentContainer.getAttrValue(e, TABPOLICY);</span>
<span class="nc" id="L58">    int tabPolicy = JTabbedPane.SCROLL_TAB_LAYOUT;</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">    if (tabPolicyStr != null) {</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">      if (tabPolicyStr.equalsIgnoreCase(&quot;wrap&quot;)) {</span>
<span class="nc" id="L61">        tabPolicy = JTabbedPane.WRAP_TAB_LAYOUT;</span>
      }
<span class="nc bnc" id="L63" title="All 2 branches missed.">      if (tabPolicyStr.equalsIgnoreCase(&quot;scroll&quot;)) {</span>
<span class="nc" id="L64">        tabPolicy = JTabbedPane.SCROLL_TAB_LAYOUT;</span>
      }
    }

<span class="nc" id="L68">    String tabPlacementStr = gui4jComponentContainer.getAttrValue(e, TABPLACEMENT);</span>
<span class="nc" id="L69">    int tabPlacement = SwingConstants.TOP;</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">    if (tabPlacementStr != null) {</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">      if (tabPlacementStr.equalsIgnoreCase(&quot;top&quot;)) {</span>
<span class="nc" id="L72">        tabPlacement = SwingConstants.TOP;</span>
      }
<span class="nc bnc" id="L74" title="All 2 branches missed.">      if (tabPlacementStr.equalsIgnoreCase(&quot;bottom&quot;)) {</span>
<span class="nc" id="L75">        tabPlacement = SwingConstants.BOTTOM;</span>
      }
<span class="nc bnc" id="L77" title="All 2 branches missed.">      if (tabPlacementStr.equalsIgnoreCase(&quot;left&quot;)) {</span>
<span class="nc" id="L78">        tabPlacement = SwingConstants.LEFT;</span>
      }
<span class="nc bnc" id="L80" title="All 2 branches missed.">      if (tabPlacementStr.equalsIgnoreCase(&quot;right&quot;)) {</span>
<span class="nc" id="L81">        tabPlacement = SwingConstants.RIGHT;</span>
      }
    }

<span class="nc" id="L85">    boolean embedded = gui4jComponentContainer.getBooleanAttrValue(e, EMBEDDED, false);</span>

<span class="nc" id="L87">    Gui4jTabbedPane gui4jTabbedPane =</span>
        new Gui4jTabbedPane(gui4jComponentContainer, id, tabPolicy, tabPlacement, embedded);

    {
<span class="nc" id="L91">      Map m = null;</span>
<span class="nc" id="L92">      Gui4jCall refresh = getGui4jAccessInstance(null, m, gui4jTabbedPane, e, TABSELECTION);</span>
<span class="nc bnc" id="L93" title="All 2 branches missed.">      if (refresh != null) {</span>
<span class="nc" id="L94">        Gui4jCall[] dependantProperties = refresh.getDependantProperties();</span>
<span class="nc bnc" id="L95" title="All 4 branches missed.">        if (dependantProperties == null || dependantProperties.length == 0) {</span>
<span class="nc" id="L96">          mLogger.warn(&quot;Set of dependant events is empty&quot;);</span>
        }
<span class="nc" id="L98">        gui4jTabbedPane.setTabSelection(dependantProperties);</span>
      }
    }

<span class="nc" id="L102">    gui4jTabbedPane.setOnChange(getGui4jAccessInstance(null, gui4jTabbedPane, e, ONCHANGE));</span>

<span class="nc" id="L104">    List children = e.elements();</span>
<span class="nc" id="L105">    List errorList = new ArrayList();</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">    for (Iterator it = children.iterator(); it.hasNext(); ) {</span>
      try {
<span class="nc" id="L108">        LElement child = (LElement) it.next();</span>
<span class="nc" id="L109">        Gui4jCall title = getGui4jAccessInstance(String.class, gui4jTabbedPane, child, TITLE);</span>
<span class="nc" id="L110">        Gui4jCall foreground =</span>
<span class="nc" id="L111">            getGui4jAccessInstance(Color.class, gui4jTabbedPane, child, FOREGROUND);</span>
<span class="nc" id="L112">        Gui4jCall background =</span>
<span class="nc" id="L113">            getGui4jAccessInstance(Color.class, gui4jTabbedPane, child, BACKGROUND);</span>
<span class="nc" id="L114">        Gui4jCall enabled = getGui4jAccessInstance(Boolean.TYPE, gui4jTabbedPane, child, ENABLED);</span>
<span class="nc" id="L115">        Gui4jCall visible = getGui4jAccessInstance(Boolean.TYPE, gui4jTabbedPane, child, VISIBLE);</span>
<span class="nc" id="L116">        Gui4jCall tooltip = getGui4jAccessInstance(String.class, gui4jTabbedPane, child, TOOLTIP);</span>
<span class="nc" id="L117">        Gui4jCall condition =</span>
<span class="nc" id="L118">            getGui4jAccessInstance(Boolean.TYPE, gui4jTabbedPane, child, CONDITION);</span>
<span class="nc" id="L119">        Gui4jCall onSelect = getGui4jAccessInstance(null, gui4jTabbedPane, child, ONSELECT);</span>
<span class="nc" id="L120">        String gui4jId = child.attributeValue(ID);</span>
        Gui4jQualifiedComponent gui4jComponentInPath;
<span class="nc bnc" id="L122" title="All 2 branches missed.">        if (gui4jId == null) {</span>
<span class="nc bnc" id="L123" title="All 2 branches missed.">          if (child.elements().isEmpty()) {</span>
<span class="nc" id="L124">            Object[] args = {PLACEMENT};</span>
<span class="nc" id="L125">            throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L126">                gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L127">                Gui4jComponentContainerManager.getLineNumber(child),</span>
                RESOURCE_ERROR_element_must_contain_gui4jComponent,
                args);
          }
<span class="nc" id="L131">          LElement gui4jElement = (LElement) child.elements().iterator().next();</span>
<span class="nc" id="L132">          gui4jComponentInPath = gui4jComponentContainer.extractGui4jComponent(gui4jElement);</span>
<span class="nc" id="L133">        } else {</span>
<span class="nc" id="L134">          gui4jComponentInPath = gui4jComponentContainer.getGui4jQualifiedComponent(gui4jId);</span>
        }

        // is automatically added by the constructor
<span class="nc" id="L138">        Gui4jTabbedPane.Entry entry = gui4jTabbedPane.new Entry(title, gui4jComponentInPath);</span>
<span class="nc" id="L139">        entry.setForeground(foreground);</span>
<span class="nc" id="L140">        entry.setBackground(background);</span>
<span class="nc" id="L141">        entry.setTooltip(tooltip);</span>
<span class="nc" id="L142">        entry.setEnabled(enabled);</span>
<span class="nc" id="L143">        entry.setVisible(visible);</span>
<span class="nc" id="L144">        entry.setCondition(condition);</span>
<span class="nc" id="L145">        entry.setOnSelect(onSelect);</span>
<span class="nc" id="L146">      } catch (Throwable t) {</span>
<span class="nc" id="L147">        errorList.add(t);</span>
<span class="nc" id="L148">      }</span>
    }
<span class="nc" id="L150">    checkErrorList(errorList);</span>
<span class="nc" id="L151">    return gui4jTabbedPane;</span>
  }

  public void addToplevelAttributes(List attrList, Filter filter) {
    //      TODO: use constants
<span class="nc" id="L156">    Set enumTabPolicy = new HashSet();</span>
<span class="nc" id="L157">    enumTabPolicy.add(new Param(&quot;wrap&quot;));</span>
<span class="nc" id="L158">    enumTabPolicy.add(new Param(&quot;scroll&quot;));</span>

<span class="nc" id="L160">    Set enumTabPlacement = new HashSet();</span>
<span class="nc" id="L161">    enumTabPlacement.add(new Param(&quot;top&quot;));</span>
<span class="nc" id="L162">    enumTabPlacement.add(new Param(&quot;bottom&quot;));</span>
<span class="nc" id="L163">    enumTabPlacement.add(new Param(&quot;left&quot;));</span>
<span class="nc" id="L164">    enumTabPlacement.add(new Param(&quot;right&quot;));</span>

<span class="nc" id="L166">    super.addToplevelAttributes(attrList, filter);</span>
<span class="nc bnc" id="L167" title="All 4 branches missed.">    if (filter == null || filter.takeIt(Gui4jTabbedPaneFactory.class)) {</span>
<span class="nc" id="L168">      attrList.add(</span>
          new Attribute(
              TABPOLICY, new AttributeTypeEnumeration(enumTabPolicy, &quot;scroll&quot;), IMPLIED, false));
<span class="nc" id="L171">      attrList.add(</span>
          new Attribute(
              TABPLACEMENT, new AttributeTypeEnumeration(enumTabPlacement, &quot;top&quot;), IMPLIED, false));
<span class="nc" id="L174">      attrList.add(new Attribute(ONCHANGE, new AttributeTypeMethodCall(null), IMPLIED, false));</span>
<span class="nc" id="L175">      attrList.add(new Attribute(TABSELECTION, new AttributeTypeMethodCall(null), IMPLIED, false));</span>
<span class="nc" id="L176">      attrList.add(</span>
          new Attribute(
<span class="nc" id="L178">              EMBEDDED, AttributeTypeEnumeration.getBooleanInstance(false), IMPLIED, false));</span>
    }
<span class="nc" id="L180">  }</span>

  public SubElement getSubElement(String elementName) {
<span class="nc bnc" id="L183" title="All 2 branches missed.">    if (NAME.equals(elementName)) {</span>
<span class="nc" id="L184">      SubElement place = SubElement.getInstance(PLACEMENT);</span>
<span class="nc" id="L185">      return SubElement.star(place);</span>
    }
<span class="nc bnc" id="L187" title="All 2 branches missed.">    if (PLACEMENT.equals(elementName)) {</span>
<span class="nc" id="L188">      return SubElement.optional(SubElement.gui4jComponent());</span>
    }
<span class="nc" id="L190">    return null;</span>
  }

  public void addInnerAttributes(String elementName, List list) {
<span class="nc bnc" id="L194" title="All 2 branches missed.">    if (PLACEMENT.equals(elementName)) {</span>
<span class="nc" id="L195">      Attribute[] attributesSubElement = {</span>
        new Attribute(TITLE, new AttributeTypeMethodCall(String.class), REQUIRED, false),
        new Attribute(ID, new AttributeTypeID(), IMPLIED, false),
        new Attribute(FOREGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(BACKGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(TOOLTIP, new AttributeTypeMethodCall(String.class), IMPLIED, false),
        new Attribute(ENABLED, new AttributeTypeMethodCall(Boolean.TYPE), IMPLIED, false),
        new Attribute(VISIBLE, new AttributeTypeMethodCall(Boolean.TYPE), IMPLIED, false),
        new Attribute(CONDITION, new AttributeTypeMethodCall(Boolean.TYPE), IMPLIED, false),
        new Attribute(ONSELECT, new AttributeTypeMethodCall(null), IMPLIED, false),
      };
<span class="nc" id="L206">      list.addAll(Arrays.asList(attributesSubElement));</span>
    }
<span class="nc" id="L208">  }</span>

  public String[] getInnerElements() {
<span class="nc" id="L211">    String[] elems = {PLACEMENT};</span>
<span class="nc" id="L212">    return elems;</span>
  }

  /**
   * @see org.gui4j.core.Gui4jComponentFactory#getName()
   */
  public String getName() {
<span class="nc" id="L219">    return NAME;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>