<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Gui4jCellTableFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">gui4j</a> &gt; <a href="index.source.html" class="el_package">org.gui4j.component.factory</a> &gt; <span class="el_source">Gui4jCellTableFactory.java</span></div><h1>Gui4jCellTableFactory.java</h1><pre class="source lang-java linenums">package org.gui4j.component.factory;

import java.awt.Color;
import java.awt.Font;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.dom4j.LElement;
import org.gui4j.component.Gui4jCellTable;
import org.gui4j.component.Gui4jJComponent;
import org.gui4j.core.Gui4jCall;
import org.gui4j.core.Gui4jComponentContainer;
import org.gui4j.core.Gui4jComponentContainerManager;
import org.gui4j.core.Gui4jMap1;
import org.gui4j.core.Gui4jTextAttribute;
import org.gui4j.core.definition.Attribute;
import org.gui4j.core.definition.AttributeTypeAlias;
import org.gui4j.core.definition.AttributeTypeEnumeration;
import org.gui4j.core.definition.AttributeTypeFloatingPoint;
import org.gui4j.core.definition.AttributeTypeInteger;
import org.gui4j.core.definition.AttributeTypeMethodCall;
import org.gui4j.core.definition.Param;
import org.gui4j.exception.Gui4jUncheckedException;
import org.gui4j.util.Filter;

<span class="nc" id="L34">public class Gui4jCellTableFactory extends Gui4jJComponentFactory {</span>
<span class="nc" id="L35">  private static final Log mLogger = LogFactory.getLog(Gui4jCellTableFactory.class);</span>

  private static final String NAME = &quot;cellTable&quot;;
  private static final String ELEMENT_CELL = &quot;cell&quot;;
  private static final String ELEMENT_COLUMN = &quot;column&quot;;
  private static final String ELEMENT_ROW = &quot;row&quot;;
  private static final String COLVALUE = &quot;colValue&quot;;
  private static final String ROWVALUE = &quot;rowValue&quot;;
  private static final String ROWNAME = &quot;name&quot;;
  private static final String ATTR_NAME = &quot;name&quot;;
  private static final String COLS = &quot;cols&quot;;
  private static final String ROWS = &quot;rows&quot;;
  private static final String VISIBLEROWS = &quot;visibleRows&quot;;
  private static final String COL = &quot;col&quot;;
  private static final String ROW = &quot;row&quot;;
  private static final String VALUE = &quot;value&quot;;
  private static final String SETVALUE = &quot;setValue&quot;;
  private static final String REFRESH = &quot;refresh&quot;;
  private static final String AUTOMATIC_REFRESH = &quot;automaticRefresh&quot;;
  private static final String ONSETVALUE = &quot;onSetValue&quot;;
  private static final String WEIGHT = &quot;weight&quot;;
  private static final String REORDERINGALLOWED = &quot;reorderingAllowed&quot;;
  private static final String ROWSELECTIONALLOWED = &quot;rowSelectionAllowed&quot;;
  private static final String ROWSELECTIONMODE = &quot;rowSelectionMode&quot;;
  private static final String COLSELECTIONMODE = &quot;colSelectionMode&quot;;
  private static final String ROWHEADERS = &quot;rowHeaders&quot;;
  private static final String COLUMNHEADERS = &quot;columnHeaders&quot;;
  private static final String INDENTATION = &quot;indentation&quot;;
  private static final String LIST = &quot;list&quot;;
  private static final String LISTTYPE = &quot;listType&quot;;
  private static final String LISTITEM = &quot;listItem&quot;;
  private static final String LISTNULLITEM = &quot;listNullItem&quot;;
  private static final String LISTEDITABLE = &quot;listEditable&quot;;
  private static final String STRINGCONVERT = &quot;stringConvert&quot;;
  private static final String BACKGROUND_HEADER = &quot;headerBackground&quot;;
  private static final String FOREGROUND = Gui4jTextAttribute.FOREGROUND;
  private static final String BACKGROUND = Gui4jTextAttribute.BACKGROUND;
  private static final String FONT = Gui4jTextAttribute.FONT;
  private static final String ALIGNMENT = Gui4jTextAttribute.ALIGNMENT;

  /* (non-Javadoc)
   * @see org.gui4j.component.factory.Gui4jJComponentFactory#defineGui4jJComponentBy(org.gui4j.core.Gui4jComponentContainer, java.lang.String, org.dom4j.LElement)
   */
  protected Gui4jJComponent defineGui4jJComponentBy(
      Gui4jComponentContainer gui4jComponentContainer, String id, LElement e) {
<span class="nc" id="L80">    int rows = getIntValue(gui4jComponentContainer, e, ROWS);</span>
<span class="nc" id="L81">    int visibleRows = getIntValue(gui4jComponentContainer, e, VISIBLEROWS, -1);</span>
<span class="nc" id="L82">    int cols = getIntValue(gui4jComponentContainer, e, COLS);</span>
<span class="nc" id="L83">    boolean useRowHeaders = gui4jComponentContainer.getBooleanAttrValue(e, ROWHEADERS, false);</span>
<span class="nc" id="L84">    boolean useColumnHeaders = gui4jComponentContainer.getBooleanAttrValue(e, COLUMNHEADERS, true);</span>
<span class="nc" id="L85">    boolean automaticRefresh =</span>
<span class="nc" id="L86">        gui4jComponentContainer.getBooleanAttrValue(e, AUTOMATIC_REFRESH, true);</span>
<span class="nc" id="L87">    Gui4jCellTable gui4jCellTable =</span>
        new Gui4jCellTable(
            gui4jComponentContainer,
            id,
            rows,
            cols,
            visibleRows,
            useRowHeaders,
            useColumnHeaders,
            automaticRefresh);
<span class="nc" id="L97">    gui4jCellTable.setHeaderBackground(</span>
<span class="nc" id="L98">        getGui4jAccessInstance(Color.class, gui4jCellTable, e, BACKGROUND_HEADER));</span>
    {
<span class="nc" id="L100">      String reorderingAllowed = gui4jComponentContainer.getAttrValue(e, REORDERINGALLOWED);</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">      if (reorderingAllowed != null) {</span>
<span class="nc" id="L102">        gui4jCellTable.setReorderingAllowed(reorderingAllowed.equalsIgnoreCase(&quot;true&quot;));</span>
      }
    }
    {
<span class="nc" id="L106">      String rowSelectionAllowed = gui4jComponentContainer.getAttrValue(e, ROWSELECTIONALLOWED);</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">      if (rowSelectionAllowed != null) {</span>
<span class="nc" id="L108">        gui4jCellTable.setRowSelectionAllowed(rowSelectionAllowed.equalsIgnoreCase(&quot;true&quot;));</span>
      }
    }
    {
<span class="nc" id="L112">      Map m = null;</span>
<span class="nc" id="L113">      Gui4jCall refresh = getGui4jAccessInstance(null, m, gui4jCellTable, e, REFRESH);</span>
<span class="nc bnc" id="L114" title="All 2 branches missed.">      if (refresh != null) {</span>
<span class="nc" id="L115">        Gui4jCall[] dependantProperties = refresh.getDependantProperties();</span>
<span class="nc bnc" id="L116" title="All 4 branches missed.">        if (dependantProperties == null || dependantProperties.length == 0) {</span>
<span class="nc" id="L117">          mLogger.warn(&quot;Set of dependant events is empty&quot;);</span>
        }
<span class="nc" id="L119">        gui4jCellTable.setRefresh(dependantProperties);</span>
      }
    }
    {
<span class="nc" id="L123">      Map m = null;</span>
<span class="nc" id="L124">      gui4jCellTable.setOnSetValue(getGui4jAccessInstance(null, m, gui4jCellTable, e, ONSETVALUE));</span>
    }
    {
<span class="nc" id="L127">      String listSelectionMode = gui4jComponentContainer.getAttrValue(e, ROWSELECTIONMODE);</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">      if (listSelectionMode != null) {</span>
<span class="nc" id="L129">        gui4jCellTable.setRowSelectionMode(Gui4jListFactory.getSelectionMode(listSelectionMode));</span>
      }
    }
    {
<span class="nc" id="L133">      String listSelectionMode = gui4jComponentContainer.getAttrValue(e, COLSELECTIONMODE);</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">      if (listSelectionMode != null) {</span>
<span class="nc" id="L135">        gui4jCellTable.setColSelectionMode(Gui4jListFactory.getSelectionMode(listSelectionMode));</span>
      }
    }
<span class="nc" id="L138">    List errorList = new ArrayList();</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">    for (Iterator it = e.elements().iterator(); it.hasNext(); ) {</span>
      try {
<span class="nc" id="L141">        LElement child = (LElement) it.next();</span>
<span class="nc" id="L142">        gui4jComponentContainer.autoExtend(child);</span>
<span class="nc" id="L143">        String elemName = child.getName();</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">        if (elemName.equals(ELEMENT_COLUMN)) {</span>
<span class="nc" id="L145">          int col = getIntValue(gui4jComponentContainer, child, COL);</span>

<span class="nc bnc" id="L147" title="All 4 branches missed.">          if (col &lt; 0 || col &gt;= cols) {</span>
<span class="nc" id="L148">            Object[] args = {Integer.valueOf(col), Integer.valueOf(cols)};</span>
<span class="nc" id="L149">            throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L150">                gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L151">                Gui4jComponentContainerManager.getLineNumber(child),</span>
                RESOURCE_ERROR_invalid_column,
                args);
          }

          Gui4jCall enabled;
<span class="nc" id="L157">          Gui4jCall colValue = null;</span>
<span class="nc" id="L158">          Gui4jCall columnName = null;</span>
          {
<span class="nc" id="L160">            Map m = null;</span>
<span class="nc" id="L161">            colValue = getGui4jAccessInstance(Object.class, m, gui4jCellTable, child, COLVALUE);</span>
<span class="nc" id="L162">            enabled = getGui4jAccessInstance(Boolean.TYPE, m, gui4jCellTable, child, ENABLED);</span>
          }
          {
<span class="nc" id="L165">            Map m = null;</span>
<span class="nc bnc" id="L166" title="All 2 branches missed.">            if (colValue != null) {</span>
<span class="nc" id="L167">              m = new Gui4jMap1(Gui4jCellTable.PARAM_COLVALUE, colValue.getResultClass());</span>
            }
<span class="nc" id="L169">            columnName = getGui4jAccessInstance(Object.class, m, gui4jCellTable, child, ATTR_NAME);</span>
          }

<span class="nc" id="L172">          Gui4jTextAttribute textAttribute =</span>
<span class="nc" id="L173">              Gui4jTextAttribute.getInstance(this, gui4jCellTable, child);</span>

          // column is automatically added by constructor
<span class="nc" id="L176">          Gui4jCellTable.Gui4jColumnTable gui4jColumnTable =</span>
<span class="nc" id="L177">              gui4jCellTable</span>
              .new Gui4jColumnTable(col, columnName, colValue, textAttribute, enabled);

<span class="nc" id="L180">          gui4jColumnTable.setWeight(getDoubleValue(gui4jComponentContainer, child, WEIGHT, 1.0));</span>
        }
<span class="nc bnc" id="L182" title="All 2 branches missed.">        if (elemName.equals(ELEMENT_ROW)) {</span>
<span class="nc" id="L183">          int row = getIntValue(gui4jComponentContainer, child, ROW);</span>

<span class="nc bnc" id="L185" title="All 4 branches missed.">          if (row &lt; 0 || row &gt;= rows) {</span>
<span class="nc" id="L186">            Object[] args = {Integer.valueOf(row), Integer.valueOf(rows)};</span>
<span class="nc" id="L187">            throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L188">                gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L189">                Gui4jComponentContainerManager.getLineNumber(child),</span>
                RESOURCE_ERROR_invalid_row,
                args);
          }

<span class="nc" id="L194">          int indentation = getIntValue(gui4jComponentContainer, child, INDENTATION, 0);</span>
<span class="nc" id="L195">          Map m = null;</span>
<span class="nc" id="L196">          Gui4jCall rowValue =</span>
<span class="nc" id="L197">              getGui4jAccessInstance(Object.class, m, gui4jCellTable, child, ROWVALUE);</span>
          Gui4jCall rowName;
          {
<span class="nc" id="L200">            Map paramMap = new HashMap();</span>
<span class="nc" id="L201">            paramMap.put(Gui4jCellTable.PARAM_ROW, Integer.TYPE);</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">            if (rowValue != null) {</span>
<span class="nc" id="L203">              paramMap.put(Gui4jCellTable.PARAM_ROWVALUE, rowValue.getResultClass());</span>
            }
<span class="nc" id="L205">            rowName =</span>
<span class="nc" id="L206">                getGui4jAccessInstance(String.class, paramMap, gui4jCellTable, child, ROWNAME);</span>
          }
<span class="nc" id="L208">          Gui4jTextAttribute textAttribute =</span>
<span class="nc" id="L209">              Gui4jTextAttribute.getInstance(this, gui4jCellTable, child);</span>

<span class="nc" id="L211">          gui4jCellTable.setRow(row, rowValue, rowName, textAttribute, indentation);</span>
        }
<span class="nc bnc" id="L213" title="All 2 branches missed.">        if (elemName.equals(ELEMENT_CELL)) {</span>
<span class="nc" id="L214">          Gui4jCall list = null;</span>
<span class="nc" id="L215">          Gui4jCall listItem = null;</span>
<span class="nc" id="L216">          Gui4jCall listNullItem = null;</span>
<span class="nc" id="L217">          Gui4jCall listEditable = null;</span>
<span class="nc" id="L218">          Gui4jCall stringConvert = null;</span>

<span class="nc" id="L220">          int col = getIntValue(gui4jComponentContainer, child, COL);</span>
<span class="nc" id="L221">          int row = getIntValue(gui4jComponentContainer, child, ROW);</span>

<span class="nc bnc" id="L223" title="All 4 branches missed.">          if (col &lt; 0 || col &gt;= cols) {</span>
<span class="nc" id="L224">            Object[] args = {Integer.valueOf(col), Integer.valueOf(cols)};</span>
<span class="nc" id="L225">            throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L226">                gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L227">                Gui4jComponentContainerManager.getLineNumber(child),</span>
                RESOURCE_ERROR_invalid_column,
                args);
          }

<span class="nc bnc" id="L232" title="All 4 branches missed.">          if (row &lt; 0 || row &gt;= rows) {</span>
<span class="nc" id="L233">            Object[] args = {Integer.valueOf(row), Integer.valueOf(rows)};</span>
<span class="nc" id="L234">            throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L235">                gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L236">                Gui4jComponentContainerManager.getLineNumber(child),</span>
                RESOURCE_ERROR_invalid_row,
                args);
          }

<span class="nc" id="L241">          Map m = new HashMap();</span>
<span class="nc" id="L242">          m.put(Gui4jCellTable.PARAM_COL, Integer.TYPE);</span>
<span class="nc" id="L243">          m.put(Gui4jCellTable.PARAM_ROW, Integer.TYPE);</span>
<span class="nc" id="L244">          Class colValueType = gui4jCellTable.getColumnValueType(col);</span>
<span class="nc" id="L245">          Class rowValueType = gui4jCellTable.getRowValueType(row);</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">          if (colValueType != null) {</span>
<span class="nc" id="L247">            m.put(Gui4jCellTable.PARAM_COLVALUE, colValueType);</span>
          }
<span class="nc bnc" id="L249" title="All 2 branches missed.">          if (rowValueType != null) {</span>
<span class="nc" id="L250">            m.put(Gui4jCellTable.PARAM_ROWVALUE, rowValueType);</span>
          }

<span class="nc" id="L253">          String listTypeAliasName = gui4jComponentContainer.getAttrValue(child, LISTTYPE);</span>
<span class="nc" id="L254">          Class listTypeClazz = gui4jComponentContainer.getClassForAliasName(listTypeAliasName);</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">          if (listTypeClazz != null) {</span>
<span class="nc" id="L256">            list = getGui4jAccessInstance(Collection.class, m, gui4jCellTable, child, LIST);</span>

<span class="nc bnc" id="L258" title="All 2 branches missed.">            if (list != null) {</span>
<span class="nc" id="L259">              m.put(Gui4jCellTable.PARAM_LIST, list.getResultClass());</span>
<span class="nc" id="L260">              listItem = getGui4jAccessInstance(listTypeClazz, m, gui4jCellTable, child, LISTITEM);</span>
<span class="nc bnc" id="L261" title="All 2 branches missed.">              if (listItem == null) {</span>
<span class="nc" id="L262">                Object[] args = {child.getName(), LISTITEM};</span>
<span class="nc" id="L263">                throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L264">                    gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L265">                    Gui4jComponentContainerManager.getLineNumber(child.attribute(LISTTYPE)),</span>
                    RESOURCE_ERROR_attribute_not_defined,
                    args);
              }
<span class="nc" id="L269">              listNullItem =</span>
<span class="nc" id="L270">                  getGui4jAccessInstance(String.class, gui4jCellTable, child, LISTNULLITEM);</span>
<span class="nc" id="L271">              Map nullMap = null;</span>
<span class="nc" id="L272">              listEditable =</span>
<span class="nc" id="L273">                  getGui4jAccessInstance(</span>
                      Boolean.TYPE, nullMap, gui4jCellTable, child, LISTEDITABLE);
<span class="nc" id="L275">              stringConvert =</span>
<span class="nc" id="L276">                  getGui4jAccessInstance(</span>
                      listTypeClazz, String.class, gui4jCellTable, child, STRINGCONVERT);
<span class="nc bnc" id="L278" title="All 4 branches missed.">              if (listEditable != null</span>
                  &amp;&amp; stringConvert == null
<span class="nc bnc" id="L280" title="All 2 branches missed.">                  &amp;&amp; !String.class.isAssignableFrom(listTypeClazz)) {</span>
<span class="nc" id="L281">                Object[] args = {};</span>
<span class="nc" id="L282">                throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L283">                    gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L284">                    Gui4jComponentContainerManager.getLineNumber(child.attribute(LISTEDITABLE)),</span>
                    RESOURCE_ERROR_attribute_listEditable_defined,
                    args);
              }
<span class="nc" id="L288">            } else {</span>
<span class="nc" id="L289">              Object[] args = {child.getName(), LIST};</span>
<span class="nc" id="L290">              throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L291">                  gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L292">                  Gui4jComponentContainerManager.getLineNumber(child.attribute(LISTTYPE)),</span>
                  RESOURCE_ERROR_attribute_not_defined,
                  args);
            }
          }

<span class="nc" id="L298">          Gui4jCall value = null;</span>
<span class="nc" id="L299">          Gui4jCall setValue = null;</span>
<span class="nc" id="L300">          Gui4jCall enabled = null;</span>

<span class="nc bnc" id="L302" title="All 6 branches missed.">          if (listTypeClazz != null &amp;&amp; list != null &amp;&amp; listItem != null) {</span>
<span class="nc" id="L303">            m.put(Gui4jCellTable.PARAM_LIST, list.getResultClass());</span>
<span class="nc" id="L304">            m.put(Gui4jCellTable.PARAM_LIST_ITEM, listItem.getResultClass());</span>
          }

          // display value
<span class="nc" id="L308">          value = getGui4jAccessInstance(Object.class, m, gui4jCellTable, child, VALUE);</span>
<span class="nc" id="L309">          enabled = getGui4jAccessInstance(Boolean.TYPE, m, gui4jCellTable, child, ENABLED);</span>

          // edit value
<span class="nc bnc" id="L312" title="All 2 branches missed.">          if (value != null) {</span>
<span class="nc bnc" id="L313" title="All 6 branches missed.">            if (listTypeClazz != null &amp;&amp; list != null &amp;&amp; listItem != null) {</span>
<span class="nc" id="L314">              m.put(Gui4jCellTable.PARAM_VALUE, listTypeClazz);</span>
            } else {
<span class="nc" id="L316">              m.put(Gui4jCellTable.PARAM_VALUE, value.getResultClass());</span>
            }
          } else {
<span class="nc" id="L319">            m.put(Gui4jCellTable.PARAM_VALUE, Object.class);</span>
          }
<span class="nc" id="L321">          m.remove(Gui4jCellTable.PARAM_LIST_ITEM);</span>
<span class="nc" id="L322">          setValue = getGui4jAccessInstance(null, m, gui4jCellTable, child, SETVALUE);</span>
<span class="nc" id="L323">          Gui4jTextAttribute textAttribute =</span>
<span class="nc" id="L324">              Gui4jTextAttribute.getInstance(this, gui4jCellTable, child);</span>

<span class="nc bnc" id="L326" title="All 2 branches missed.">          if (gui4jCellTable.isDefined(row, col)) {</span>
<span class="nc" id="L327">            Object[] args = {Integer.valueOf(row), Integer.valueOf(col)};</span>
<span class="nc" id="L328">            throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L329">                gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L330">                Gui4jComponentContainerManager.getLineNumber(child),</span>
                RESOURCE_ERROR_element_at_row_col_already_defined,
                args);
          }
          // automatically inserted by the constructor of Gui4jCell in gui4jCellTable
          /* Gui4jCellTable.Gui4jCell cell = */
<span class="nc" id="L336">          gui4jCellTable</span>
          .new Gui4jCell(
              value,
              setValue,
              enabled,
              list,
              listItem,
              listNullItem,
              listEditable,
              stringConvert,
              row,
              col,
              textAttribute);
        }
<span class="nc" id="L350">      } catch (Throwable t) {</span>
<span class="nc" id="L351">        errorList.add(t);</span>
<span class="nc" id="L352">      }</span>
    }
<span class="nc" id="L354">    checkErrorList(errorList);</span>
<span class="nc" id="L355">    return gui4jCellTable;</span>
  }

  public void addToplevelAttributes(List attrList, Filter filter) {
<span class="nc" id="L359">    super.addToplevelAttributes(attrList, filter);</span>
<span class="nc bnc" id="L360" title="All 4 branches missed.">    if (filter == null || filter.takeIt(Gui4jCellTableFactory.class)) {</span>
<span class="nc" id="L361">      attrList.add(new Attribute(COLS, new AttributeTypeInteger(), REQUIRED, false));</span>
<span class="nc" id="L362">      attrList.add(new Attribute(ROWS, new AttributeTypeInteger(), REQUIRED, false));</span>
<span class="nc" id="L363">      attrList.add(new Attribute(VISIBLEROWS, new AttributeTypeInteger(), IMPLIED, false));</span>
<span class="nc" id="L364">      attrList.add(</span>
          new Attribute(REFRESH, new AttributeTypeMethodCall(null, EVENT_AWARE), IMPLIED, false));
<span class="nc" id="L366">      attrList.add(new Attribute(ONSETVALUE, new AttributeTypeMethodCall(null), IMPLIED, false));</span>
<span class="nc" id="L367">      attrList.add(</span>
          new Attribute(
              REORDERINGALLOWED,
<span class="nc" id="L370">              AttributeTypeEnumeration.getBooleanInstance(true),</span>
              IMPLIED,
              false));
<span class="nc" id="L373">      attrList.add(</span>
          new Attribute(
              ROWSELECTIONMODE,
              new AttributeTypeEnumeration(
<span class="nc" id="L377">                  Gui4jListFactory.listSelectionModeTypeParams(), &quot;single&quot;),</span>
              IMPLIED,
              false));
<span class="nc" id="L380">      attrList.add(</span>
          new Attribute(
              COLSELECTIONMODE,
              new AttributeTypeEnumeration(
<span class="nc" id="L384">                  Gui4jListFactory.listSelectionModeTypeParams(), &quot;single&quot;),</span>
              IMPLIED,
              false));
<span class="nc" id="L387">      attrList.add(</span>
          new Attribute(
              ROWSELECTIONALLOWED,
<span class="nc" id="L390">              AttributeTypeEnumeration.getBooleanInstance(true),</span>
              IMPLIED,
              false));
<span class="nc" id="L393">      attrList.add(</span>
          new Attribute(
<span class="nc" id="L395">              ROWHEADERS, AttributeTypeEnumeration.getBooleanInstance(false), IMPLIED, false));</span>
<span class="nc" id="L396">      attrList.add(</span>
          new Attribute(
<span class="nc" id="L398">              COLUMNHEADERS, AttributeTypeEnumeration.getBooleanInstance(true), IMPLIED, false));</span>
<span class="nc" id="L399">      attrList.add(</span>
          new Attribute(
              AUTOMATIC_REFRESH,
<span class="nc" id="L402">              AttributeTypeEnumeration.getBooleanInstance(false),</span>
              IMPLIED,
              false));
<span class="nc" id="L405">      attrList.add(</span>
          new Attribute(
              BACKGROUND_HEADER, new AttributeTypeMethodCall(Color.class), IMPLIED, false));
    }
<span class="nc" id="L409">  }</span>

  public void addInnerAttributes(String elementName, List list) {
<span class="nc" id="L412">    Set s = new HashSet();</span>
<span class="nc" id="L413">    s.add(new Param(&quot;right&quot;));</span>
<span class="nc" id="L414">    s.add(new Param(&quot;center&quot;));</span>
<span class="nc" id="L415">    s.add(new Param(&quot;left&quot;));</span>
<span class="nc" id="L416">    s.add(new Param(&quot;leading&quot;));</span>
<span class="nc" id="L417">    s.add(new Param(&quot;trailing&quot;));</span>

<span class="nc bnc" id="L419" title="All 2 branches missed.">    if (ELEMENT_CELL.equals(elementName)) {</span>
<span class="nc" id="L420">      List paramsValue = new ArrayList();</span>
<span class="nc" id="L421">      List paramsCell = new ArrayList();</span>
<span class="nc" id="L422">      List paramsList = new ArrayList();</span>
<span class="nc" id="L423">      List paramsSet = new ArrayList();</span>
<span class="nc" id="L424">      paramsCell.add(new Param(Gui4jCellTable.PARAM_COL));</span>
<span class="nc" id="L425">      paramsCell.add(new Param(Gui4jCellTable.PARAM_ROW));</span>
<span class="nc" id="L426">      paramsCell.add(new Param(Gui4jCellTable.PARAM_COLVALUE));</span>
<span class="nc" id="L427">      paramsCell.add(new Param(Gui4jCellTable.PARAM_ROWVALUE));</span>
<span class="nc" id="L428">      paramsList.addAll(paramsCell);</span>
<span class="nc" id="L429">      paramsSet.addAll(paramsCell);</span>
<span class="nc" id="L430">      paramsSet.add(new Param(Gui4jCellTable.PARAM_VALUE));</span>
<span class="nc" id="L431">      paramsList.add(new Param(Gui4jCellTable.PARAM_LIST));</span>
<span class="nc" id="L432">      paramsValue.addAll(paramsList);</span>
<span class="nc" id="L433">      paramsValue.add(new Param(Gui4jCellTable.PARAM_LIST_ITEM));</span>
<span class="nc" id="L434">      Attribute[] attrs = {</span>
        new Attribute(COL, new AttributeTypeInteger(), REQUIRED, false),
        new Attribute(ROW, new AttributeTypeInteger(), REQUIRED, false),
        new Attribute(
            VALUE, new AttributeTypeMethodCall(Object.class, paramsValue), REQUIRED, false),
        new Attribute(
            ENABLED, new AttributeTypeMethodCall(Boolean.TYPE, paramsValue), IMPLIED, false),
        new Attribute(SETVALUE, new AttributeTypeMethodCall(null, paramsSet), IMPLIED, false),
        new Attribute(
            LIST, new AttributeTypeMethodCall(Collection.class, paramsCell), IMPLIED, false),
        new Attribute(LISTTYPE, new AttributeTypeAlias(), IMPLIED, false),
        new Attribute(
            LISTITEM, new AttributeTypeMethodCall(Object.class, paramsList), IMPLIED, false),
        new Attribute(LISTNULLITEM, new AttributeTypeMethodCall(String.class), IMPLIED, false),
        new Attribute(LISTEDITABLE, new AttributeTypeMethodCall(Boolean.TYPE), IMPLIED, false),
        new Attribute(STRINGCONVERT, new AttributeTypeMethodCall(Object.class), IMPLIED, false),
        new Attribute(FOREGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(BACKGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(FONT, new AttributeTypeMethodCall(Font.class), IMPLIED, false),
        new Attribute(ALIGNMENT, new AttributeTypeEnumeration(s, &quot;leading&quot;), IMPLIED, true)
      };
<span class="nc" id="L455">      list.addAll(Arrays.asList(attrs));</span>
<span class="nc" id="L456">      return;</span>
    }
<span class="nc bnc" id="L458" title="All 2 branches missed.">    if (ELEMENT_COLUMN.equals(elementName)) {</span>
<span class="nc" id="L459">      Attribute[] attrs = {</span>
        new Attribute(COL, new AttributeTypeInteger(), REQUIRED, false),
        new Attribute(ATTR_NAME, new AttributeTypeMethodCall(Object.class), IMPLIED, false),
        new Attribute(COLVALUE, new AttributeTypeMethodCall(Object.class), IMPLIED, false),
        new Attribute(WEIGHT, new AttributeTypeFloatingPoint(), IMPLIED, false),
        new Attribute(ENABLED, new AttributeTypeMethodCall(Boolean.TYPE), IMPLIED, false),
        new Attribute(FOREGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(BACKGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(FONT, new AttributeTypeMethodCall(Font.class), IMPLIED, false),
        new Attribute(ALIGNMENT, new AttributeTypeEnumeration(s), IMPLIED, true)
      };
<span class="nc" id="L470">      list.addAll(Arrays.asList(attrs));</span>
<span class="nc" id="L471">      return;</span>
    }
<span class="nc bnc" id="L473" title="All 2 branches missed.">    if (ELEMENT_ROW.equals(elementName)) {</span>
<span class="nc" id="L474">      Attribute[] attrs = {</span>
        new Attribute(ROW, new AttributeTypeInteger(), REQUIRED, false),
        new Attribute(ROWVALUE, new AttributeTypeMethodCall(Object.class), IMPLIED, false),
        new Attribute(ROWNAME, new AttributeTypeMethodCall(String.class), IMPLIED, false),
        new Attribute(INDENTATION, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(FOREGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(BACKGROUND, new AttributeTypeMethodCall(Color.class), IMPLIED, false),
        new Attribute(FONT, new AttributeTypeMethodCall(Font.class), IMPLIED, false),
        new Attribute(ALIGNMENT, new AttributeTypeEnumeration(s), IMPLIED, true)
      };
<span class="nc" id="L484">      list.addAll(Arrays.asList(attrs));</span>
<span class="nc" id="L485">      return;</span>
    }
<span class="nc" id="L487">  }</span>

  public SubElement getSubElement(String elementName) {
<span class="nc bnc" id="L490" title="All 2 branches missed.">    if (ELEMENT_ROW.equals(elementName)</span>
<span class="nc bnc" id="L491" title="All 2 branches missed.">        || ELEMENT_COLUMN.equals(elementName)</span>
<span class="nc bnc" id="L492" title="All 2 branches missed.">        || ELEMENT_CELL.equals(elementName)) {</span>
<span class="nc" id="L493">      return SubElement.empty();</span>
    }
<span class="nc bnc" id="L495" title="All 2 branches missed.">    if (NAME.equals(elementName)) {</span>
<span class="nc" id="L496">      SubElement cell = SubElement.getInstance(ELEMENT_CELL);</span>
<span class="nc" id="L497">      SubElement column = SubElement.getInstance(ELEMENT_COLUMN);</span>
<span class="nc" id="L498">      SubElement row = SubElement.getInstance(ELEMENT_ROW);</span>
<span class="nc" id="L499">      SubElement[] columnOrRow = {column, row};</span>
<span class="nc" id="L500">      SubElement[] elems = {SubElement.star(SubElement.or(columnOrRow)), SubElement.star(cell)};</span>
<span class="nc" id="L501">      return SubElement.seq(elems);</span>
    }
<span class="nc" id="L503">    return null;</span>
  }

  public String[] getInnerElements() {
<span class="nc" id="L507">    String[] elems = {ELEMENT_CELL, ELEMENT_COLUMN, ELEMENT_ROW};</span>
<span class="nc" id="L508">    return elems;</span>
  }

  /**
   * @see org.gui4j.core.Gui4jComponentFactory#getName()
   */
  public String getName() {
<span class="nc" id="L515">    return NAME;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>