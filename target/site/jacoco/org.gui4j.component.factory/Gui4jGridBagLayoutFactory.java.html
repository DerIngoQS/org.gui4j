<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Gui4jGridBagLayoutFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">gui4j</a> &gt; <a href="index.source.html" class="el_package">org.gui4j.component.factory</a> &gt; <span class="el_source">Gui4jGridBagLayoutFactory.java</span></div><h1>Gui4jGridBagLayoutFactory.java</h1><pre class="source lang-java linenums">package org.gui4j.component.factory;

import java.awt.GridBagConstraints;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.dom4j.LElement;
import org.gui4j.component.Gui4jGridBagLayout;
import org.gui4j.component.Gui4jJComponent;
import org.gui4j.core.Gui4jComponentContainer;
import org.gui4j.core.Gui4jComponentContainerManager;
import org.gui4j.core.Gui4jQualifiedComponent;
import org.gui4j.core.definition.Attribute;
import org.gui4j.core.definition.AttributeTypeEnumeration;
import org.gui4j.core.definition.AttributeTypeFloatingPoint;
import org.gui4j.core.definition.AttributeTypeID;
import org.gui4j.core.definition.AttributeTypeInteger;
import org.gui4j.exception.Gui4jUncheckedException;

<span class="nc" id="L25">public final class Gui4jGridBagLayoutFactory extends Gui4jJComponentFactory {</span>
  private static final String NAME = &quot;gridBagLayout&quot;;
  private static final String PLACEMENT = &quot;placeGbl&quot;;
  private static final String ROW = &quot;row&quot;;
  private static final String COL = &quot;col&quot;;
  private static final String WIDTH = &quot;width&quot;;
  private static final String HEIGHT = &quot;height&quot;;
  private static final String WEIGHTX = &quot;weightX&quot;;
  private static final String WEIGHTY = &quot;weightY&quot;;
  private static final String IPADX = &quot;ipadX&quot;;
  private static final String IPADY = &quot;ipadY&quot;;
  private static final String TOP = &quot;top&quot;;
  private static final String LEFT = &quot;left&quot;;
  private static final String BOTTOM = &quot;bottom&quot;;
  private static final String RIGHT = &quot;right&quot;;
  private static final String FILL = &quot;fill&quot;;
  private static final String ANCHOR = &quot;anchor&quot;;
  private static final String ID = &quot;id&quot;;
  private static final Map mAnchor;
  private static final Map mFill;

<span class="nc" id="L46">  private static final Log mLogger = LogFactory.getLog(Gui4jGridBagLayoutFactory.class);</span>

  static {
<span class="nc" id="L49">    mAnchor = new HashMap();</span>
<span class="nc" id="L50">    mFill = new HashMap();</span>
<span class="nc" id="L51">    mAnchor.put(&quot;center&quot;, Integer.valueOf(GridBagConstraints.CENTER));</span>
<span class="nc" id="L52">    mAnchor.put(&quot;east&quot;, Integer.valueOf(GridBagConstraints.EAST));</span>
<span class="nc" id="L53">    mAnchor.put(&quot;north&quot;, Integer.valueOf(GridBagConstraints.NORTH));</span>
<span class="nc" id="L54">    mAnchor.put(&quot;northEast&quot;, Integer.valueOf(GridBagConstraints.NORTHEAST));</span>
<span class="nc" id="L55">    mAnchor.put(&quot;northWest&quot;, Integer.valueOf(GridBagConstraints.NORTHWEST));</span>
<span class="nc" id="L56">    mAnchor.put(&quot;south&quot;, Integer.valueOf(GridBagConstraints.SOUTH));</span>
<span class="nc" id="L57">    mAnchor.put(&quot;southEast&quot;, Integer.valueOf(GridBagConstraints.SOUTHEAST));</span>
<span class="nc" id="L58">    mAnchor.put(&quot;southWest&quot;, Integer.valueOf(GridBagConstraints.SOUTHWEST));</span>
<span class="nc" id="L59">    mAnchor.put(&quot;west&quot;, Integer.valueOf(GridBagConstraints.WEST));</span>

<span class="nc" id="L61">    mFill.put(&quot;none&quot;, Integer.valueOf(GridBagConstraints.NONE));</span>
<span class="nc" id="L62">    mFill.put(&quot;both&quot;, Integer.valueOf(GridBagConstraints.BOTH));</span>
<span class="nc" id="L63">    mFill.put(&quot;horizontal&quot;, Integer.valueOf(GridBagConstraints.HORIZONTAL));</span>
<span class="nc" id="L64">    mFill.put(&quot;vertical&quot;, Integer.valueOf(GridBagConstraints.VERTICAL));</span>
<span class="nc" id="L65">  }</span>

  /* (non-Javadoc)
   * @see org.gui4j.component.factory.Gui4jJComponentFactory#defineGui4jJComponentBy(org.gui4j.core.Gui4jComponentContainer, java.lang.String, org.dom4j.LElement)
   */
  protected Gui4jJComponent defineGui4jJComponentBy(
      Gui4jComponentContainer gui4jComponentContainer, String id, LElement e) {
<span class="nc" id="L72">    Gui4jGridBagLayout gui4jGridBagLayout = new Gui4jGridBagLayout(gui4jComponentContainer, id);</span>
<span class="nc" id="L73">    List children = e.elements();</span>
<span class="nc" id="L74">    List errorList = new ArrayList();</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">    for (Iterator it = children.iterator(); it.hasNext(); ) {</span>
      try {
<span class="nc" id="L77">        LElement child = (LElement) it.next();</span>
<span class="nc" id="L78">        gui4jComponentContainer.autoExtend(child);</span>
<span class="nc" id="L79">        int gridY = getIntValue(gui4jComponentContainer, child, ROW);</span>
<span class="nc" id="L80">        int gridX = getIntValue(gui4jComponentContainer, child, COL);</span>
<span class="nc" id="L81">        int gridWidth = getIntValue(gui4jComponentContainer, child, WIDTH, 1);</span>
<span class="nc" id="L82">        int gridHeight = getIntValue(gui4jComponentContainer, child, HEIGHT, 1);</span>
<span class="nc" id="L83">        int ipadX = getIntValue(gui4jComponentContainer, child, IPADX, 0);</span>
<span class="nc" id="L84">        int ipadY = getIntValue(gui4jComponentContainer, child, IPADY, 0);</span>
<span class="nc" id="L85">        int top = getIntValue(gui4jComponentContainer, child, TOP, 0);</span>
<span class="nc" id="L86">        int left = getIntValue(gui4jComponentContainer, child, LEFT, 0);</span>
<span class="nc" id="L87">        int bottom = getIntValue(gui4jComponentContainer, child, BOTTOM, 0);</span>
<span class="nc" id="L88">        int right = getIntValue(gui4jComponentContainer, child, RIGHT, 0);</span>
<span class="nc" id="L89">        double weightX = getDoubleValue(gui4jComponentContainer, child, WEIGHTX, 1.0);</span>
<span class="nc" id="L90">        double weightY = getDoubleValue(gui4jComponentContainer, child, WEIGHTY, 1.0);</span>

<span class="nc" id="L92">        String anchorStr = gui4jComponentContainer.getAttrValue(child, ANCHOR);</span>
<span class="nc" id="L93">        int anchor = GridBagConstraints.WEST;</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (anchorStr != null) {</span>
<span class="nc" id="L95">          Integer val = (Integer) mAnchor.get(anchorStr);</span>
<span class="nc bnc" id="L96" title="All 2 branches missed.">          if (val != null) {</span>
<span class="nc" id="L97">            anchor = val.intValue();</span>
          } else {
<span class="nc" id="L99">            mLogger.warn(&quot;Anchor &quot; + anchorStr + &quot; is not defined&quot;);</span>
          }
        }

<span class="nc" id="L103">        String fillStr = child.attributeValue(FILL);</span>
<span class="nc" id="L104">        int fill = GridBagConstraints.BOTH;</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">        if (fillStr != null) {</span>
<span class="nc" id="L106">          fill = ((Integer) mFill.get(fillStr)).intValue();</span>
        }

<span class="nc" id="L109">        String gui4jId = child.attributeValue(ID);</span>
        Gui4jQualifiedComponent gui4jComponentInPath;
<span class="nc bnc" id="L111" title="All 2 branches missed.">        if (gui4jId == null) {</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">          if (child.elements().isEmpty()) {</span>
<span class="nc" id="L113">            Object[] args = {PLACEMENT};</span>
<span class="nc" id="L114">            throw new Gui4jUncheckedException.ResourceError(</span>
<span class="nc" id="L115">                gui4jComponentContainer.getConfigurationName(),</span>
<span class="nc" id="L116">                Gui4jComponentContainerManager.getLineNumber(child),</span>
                RESOURCE_ERROR_element_must_contain_gui4jComponent,
                args);
          }
<span class="nc" id="L120">          LElement gui4jElement = (LElement) child.elements().iterator().next();</span>
<span class="nc" id="L121">          gui4jComponentInPath = gui4jComponentContainer.extractGui4jComponent(gui4jElement);</span>
<span class="nc" id="L122">        } else {</span>
<span class="nc" id="L123">          gui4jComponentInPath = gui4jComponentContainer.getGui4jQualifiedComponent(gui4jId);</span>
        }

<span class="nc" id="L126">        gui4jGridBagLayout.addPlacement(</span>
            gui4jComponentInPath,
            gridX,
            gridY,
            gridWidth,
            gridHeight,
            fill,
            weightX,
            weightY,
            anchor,
            ipadX,
            ipadY,
            top,
            left,
            bottom,
            right);
<span class="nc" id="L142">      } catch (Throwable t) {</span>
<span class="nc" id="L143">        errorList.add(t);</span>
<span class="nc" id="L144">      }</span>
    }
<span class="nc" id="L146">    checkErrorList(errorList);</span>
<span class="nc" id="L147">    return gui4jGridBagLayout;</span>
  }

  public SubElement getSubElement(String elementName) {
<span class="nc bnc" id="L151" title="All 2 branches missed.">    if (PLACEMENT.equals(elementName)) {</span>
<span class="nc" id="L152">      return SubElement.optional(SubElement.gui4jComponent());</span>
    }
<span class="nc bnc" id="L154" title="All 2 branches missed.">    if (NAME.equals(elementName)) {</span>
<span class="nc" id="L155">      SubElement place = SubElement.getInstance(PLACEMENT);</span>
<span class="nc" id="L156">      return SubElement.star(place);</span>
    }
<span class="nc" id="L158">    return null;</span>
  }

  public void addInnerAttributes(String elementName, List list) {
<span class="nc bnc" id="L162" title="All 2 branches missed.">    if (elementName.equals(PLACEMENT)) {</span>
<span class="nc" id="L163">      Attribute[] attributesSubElement = {</span>
        new Attribute(ROW, new AttributeTypeInteger(), REQUIRED, false),
        new Attribute(COL, new AttributeTypeInteger(), REQUIRED, false),
        new Attribute(WIDTH, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(HEIGHT, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(WEIGHTX, new AttributeTypeFloatingPoint(), IMPLIED, false),
        new Attribute(WEIGHTY, new AttributeTypeFloatingPoint(), IMPLIED, false),
        new Attribute(IPADX, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(IPADY, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(TOP, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(LEFT, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(BOTTOM, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(RIGHT, new AttributeTypeInteger(), IMPLIED, false),
        new Attribute(FILL, new AttributeTypeEnumeration(mFill), IMPLIED, false),
        new Attribute(ANCHOR, new AttributeTypeEnumeration(mAnchor), IMPLIED, true),
        new Attribute(ID, new AttributeTypeID(), IMPLIED, false)
      };
<span class="nc" id="L180">      list.addAll(Arrays.asList(attributesSubElement));</span>
<span class="nc" id="L181">      return;</span>
    }
<span class="nc" id="L183">  }</span>

  public String[] getInnerElements() {
<span class="nc" id="L186">    String[] elems = {PLACEMENT};</span>
<span class="nc" id="L187">    return elems;</span>
  }

  /**
   * @see org.gui4j.core.Gui4jComponentFactory#getName()
   */
  public String getName() {
<span class="nc" id="L194">    return NAME;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>